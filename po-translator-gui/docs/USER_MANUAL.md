# PO Translator GUI - 用户手册

**版本**: v1.0  
**更新日期**: 2025-10-08  
**适用对象**: 翻译人员、本地化工程师、项目管理者

---

## 📖 目录

1. [快速开始](#快速开始)
2. [AI 配置](#ai-配置)
3. [文件操作](#文件操作)
4. [翻译工作流](#翻译工作流)
5. [高级功能](#高级功能)
6. [快捷键参考](#快捷键参考)
7. [常见问题](#常见问题)
8. [最佳实践](#最佳实践)

---

## 快速开始

### 第一次使用

#### 1. 配置 AI 服务
1. 点击右上角 **⚙️ 设置** 按钮（或按 `Ctrl+,`）
2. 在 **AI 配置** 标签页中：
   - 选择 AI 提供商（推荐：Moonshot AI）
   - 输入 API 密钥
   - 点击 **测试连接** 确认配置
   - 点击 **保存**

#### 2. 设置语言偏好
1. 在设置的 **语言设置** 标签页：
   - 选择界面语言（简体中文/English）
   - 应用会自动检测系统语言

#### 3. 开始翻译
1. 点击 **📂 打开** 按钮（或按 `Ctrl+O`）
2. 选择 PO 文件
3. 点击 **⚡ 批量翻译** 开始自动翻译
4. 翻译完成后点击 **💾 保存**（或按 `Ctrl+S`）

---

## AI 配置

### 支持的 AI 提供商

| 提供商 | 推荐场景 | 特点 |
|-------|---------|------|
| **Moonshot AI** | 中文翻译 | 中文优化，性价比高 |
| **OpenAI** | 通用翻译 | 质量稳定，多语言支持 |
| **讯飞星火** | 中文专业 | 国产，专业术语准确 |
| **百度文心** | 中文通用 | 快速响应 |
| **阿里通义** | 商业场景 | 商业化内容优化 |
| **智谱AI (GLM)** | 技术文档 | 理解能力强 |
| **Claude** | 长文本 | 上下文理解出色 |
| **Google Gemini** | 多语言 | 多语言覆盖广 |

### 配置步骤

#### 基础配置
1. **API 密钥**: 从 AI 提供商获取
2. **基础 URL**: 通常使用默认值
3. **代理设置**（可选）:
   - HTTP/HTTPS 代理地址
   - 格式：`http://localhost:7890`

#### 高级配置
1. **自定义系统提示词**:
   - 在 **系统提示词** 标签页编辑
   - 适用于特定领域翻译（如医疗、法律）
   - 示例：`你是一位专业的医学翻译专家，精通医学术语...`

2. **术语库管理**:
   - 添加专业术语
   - 系统会自动将术语融入翻译提示

---

## 文件操作

### 支持的文件格式

| 格式 | 扩展名 | 支持状态 |
|------|--------|---------|
| **PO (Gettext)** | `.po` | ✅ 完全支持 |
| **JSON (i18n)** | `.json` | ✅ 检测支持 |
| **XLIFF** | `.xliff`, `.xlf` | ✅ 检测支持 |
| **YAML** | `.yaml`, `.yml` | ✅ 检测支持 |

### 文件大小优化

应用会自动检测文件大小并优化处理策略：

| 文件大小 | 处理策略 | 预估处理时间 |
|---------|---------|------------|
| < 10MB | 直接加载 | < 1 秒 |
| 10-50MB | 自动分块（500条/批） | 3-5 秒 |
| > 50MB | 优化处理（200条/批） | 5-10 秒 |

### 文件操作

#### 打开文件
- **方式 1**: 点击 **📂 打开** 按钮
- **方式 2**: 快捷键 `Ctrl+O`
- **方式 3**: 拖拽文件到窗口（未来支持）

#### 保存文件
- **保存**: `Ctrl+S` - 保存到原文件
- **另存为**: `Ctrl+Shift+S` - 保存到新位置

---

## 翻译工作流

### 基础工作流

```
1. 打开文件 → 2. 查看条目 → 3. 翻译 → 4. 保存
```

### 批量翻译工作流

#### 步骤详解

1. **打开文件**
   - 应用自动检测源语言
   - 自动推荐目标语言

2. **选择目标语言**
   - 在顶部菜单栏选择目标语言
   - 支持 10 种语言：
     - 简体中文、繁体中文、English
     - 日本語、한국어、Français
     - Deutsch、Español、Italiano、Português

3. **执行批量翻译**
   - 点击 **⚡ 批量翻译** 按钮
   - 观察实时进度条
   - 查看翻译统计（TM 命中率、去重等）

4. **审核翻译**
   - 黄色标记的条目 = 待确认
   - 点击条目查看译文
   - 手动修改不准确的翻译

5. **精翻优化**（可选）
   - 选中待确认的条目
   - 按 `Ctrl+Shift+R` 或点击 **精翻选中**
   - 使用上下文信息重新翻译

6. **保存结果**
   - `Ctrl+S` 保存到原文件
   - `Ctrl+Shift+S` 另存为新文件

### 单条翻译工作流

1. 在左侧列表选择条目
2. 查看右侧编辑器：
   - **原文**: 待翻译文本
   - **上下文**: msgctxt（如有）
   - **注释**: 开发者提示
3. 点击 **AI 翻译** 按钮
4. 或手动输入译文
5. 译文自动保存

---

## 高级功能

### 1. Contextual Refine (精翻)

**用途**: 对 AI 翻译结果不满意时，携带上下文重新翻译

**使用方法**:
1. 选中一个或多个待确认条目（黄色标记）
2. 按 `Ctrl+Shift+R` 或点击 **精翻选中** 按钮
3. 系统会使用以下信息重新翻译：
   - 条目的 msgctxt（上下文）
   - 开发者注释
   - 前后条目内容

**适用场景**:
- 专业术语翻译
- 需要理解上下文的翻译
- 游戏/软件 UI 文本
- 带有占位符的文本

### 2. 翻译记忆库 (TM)

**自动功能**:
- ✅ 内置 83+ 常用短语
- ✅ 自动学习新翻译
- ✅ 优先使用已有翻译
- ✅ 30-50% 命中率

**查看统计**:
- 批量翻译完成后查看 TM 统计
- 显示命中率和学习到的新短语数

### 3. 术语库管理

**添加术语**:
1. 打开设置 → **术语库** 标签页
2. 点击 **添加术语**
3. 填写：
   - 原文术语
   - 译文术语
   - 类别（可选）
   - 备注（可选）
4. 保存

**生成风格提示词**:
- 点击 **生成风格提示词** 按钮
- AI 自动分析术语库并生成翻译风格指南
- 自动拼接到系统提示词

### 4. 自定义系统提示词

**场景示例**:

#### 医疗翻译
```
你是一位专业的医学翻译专家，精通医学术语翻译。
- 准确翻译药品名称和医学术语
- 保持医学表述的严谨性
- 使用标准医学术语
```

#### 游戏本地化
```
你是一位游戏本地化专家，擅长游戏文本翻译。
- 保持游戏氛围和玩家体验
- 使用游戏玩家熟悉的表达
- 注意保留游戏术语的一致性
```

#### 法律文档
```
你是一位法律翻译专家，精通法律术语和条款翻译。
- 准确传达法律含义
- 使用标准法律术语
- 保持条款的严谨性
```

---

## 快捷键参考

### 文件操作
| 快捷键 | 功能 |
|--------|------|
| `Ctrl+O` | 打开文件 |
| `Ctrl+S` | 保存文件 |
| `Ctrl+Shift+S` | 另存为 |

### 翻译操作
| 快捷键 | 功能 |
|--------|------|
| `Ctrl+Shift+R` | 精翻选中的条目 |
| `Enter` | 跳到下一个未翻译条目 |

### 应用设置
| 快捷键 | 功能 |
|--------|------|
| `Ctrl+,` | 打开设置 |
| `Ctrl+D` | 打开开发工具（调试用） |

---

## 常见问题

### Q1: 批量翻译失败怎么办？

**A**: 检查以下几点：
1. ✅ API 密钥是否正确
2. ✅ 网络连接是否正常
3. ✅ API 额度是否充足
4. ✅ 代理设置是否正确（如使用）

### Q2: 翻译质量不满意？

**A**: 尝试以下方法：
1. 使用 **Contextual Refine** (精翻) 功能
2. 自定义系统提示词，添加领域知识
3. 添加专业术语到术语库
4. 更换 AI 提供商（如从 Moonshot 换到 Claude）

### Q3: 文件加载很慢？

**A**: 
- 小文件（<10MB）应该很快
- 大文件会自动分块处理
- 超大文件（>50MB）建议拆分

### Q4: 如何备份翻译记忆库？

**A**: 
- 翻译记忆库文件位置：
  - Windows: `C:\Users\<用户名>\AppData\Roaming\po-translator-gui\translation_memory.json`
  - macOS: `~/Library/Application Support/po-translator-gui/translation_memory.json`
  - Linux: `~/.config/po-translator-gui/translation_memory.json`
- 复制此文件即可备份

### Q5: 多个项目如何管理不同的术语库？

**A**: 
1. 每个项目创建独立的术语库文件
2. 在设置中切换术语库路径
3. 或使用项目文件夹内的 `.promptx/resource` 目录（未来支持）

---

## 最佳实践

### 翻译流程建议

#### 1. 准备阶段
- ✅ 准备好术语库
- ✅ 配置好 AI 服务
- ✅ 自定义系统提示词（如需要）
- ✅ 确认目标语言

#### 2. 初次翻译
- ✅ 使用批量翻译快速完成
- ✅ 观察 TM 命中率
- ✅ 记录翻译统计

#### 3. 审核阶段
- ✅ 优先审核黄色标记的条目
- ✅ 对不满意的条目使用精翻
- ✅ 手动修正AI错误

#### 4. 质量保证
- ✅ 检查专业术语一致性
- ✅ 检查占位符是否保留
- ✅ 检查格式是否正确
- ✅ 进行最终校对

### 团队协作建议

#### 术语库共享
1. 建立团队共享的术语库
2. 定期更新和同步
3. 使用版本控制管理

#### 翻译记忆库管理
1. 定期导出和备份 TM
2. 团队成员共享优质TM
3. 清理低质量翻译

#### 质量控制
1. 建立翻译审核流程
2. 使用精翻功能提升质量
3. 定期review翻译结果

---

## 性能建议

### 大文件处理
- **< 1000 条目**: 正常处理
- **1000-5000 条目**: 使用批量翻译，分批处理
- **> 5000 条目**: 建议拆分文件或使用流式处理（未来）

### 批量翻译优化
1. 选择合适的批处理大小
2. 避免并发过多请求
3. 合理设置请求超时

### API 成本优化
1. 充分利用翻译记忆库（TM）
2. 使用去重功能减少重复翻译
3. 选择性价比高的 AI 提供商

---

## 技术支持

### 获取帮助
- 📚 查看完整文档：[docs/README.md](./README.md)
- 🐛 报告问题：[GitHub Issues](https://github.com/.../issues)
- 💬 讨论交流：[GitHub Discussions](https://github.com/.../discussions)

### 版本信息
- **当前版本**: v1.0
- **构建时间**: 2025-10-08
- **测试覆盖**: 73 个测试，100% 通过
- **开发状态**: Production Ready

---

**祝您翻译愉快！** 🎉

